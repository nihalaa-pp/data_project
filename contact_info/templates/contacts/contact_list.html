{% extends 'base.html' %}

{% block content %}
<h2>Contact List</h2>

<!-- Search and Filter Form -->
<form method="GET" action="{% url 'contacts:contact_list' %}" class="search-form">
    <input type="text" name="q" value="{{ search_query }}" placeholder="Search contacts...">
    <select name="native_place">
        <option value="">Native Place</option>
        {% for place in native_places %}
            <option value="{{ place }}" {% if place == selected_native_place %}selected{% endif %}>{{ place }}</option>
        {% endfor %}
    </select>
    <select name="category">
        <option value="">Category</option>
        {% for cat in categories %}
            <option value="{{ cat }}" {% if cat == selected_category %}selected{% endif %}>{{ cat }}</option>
        {% endfor %}
    </select>
    <select name="profession">
        <option value="">Profession</option>
        {% for prof in professions %}
            <option value="{{ prof }}" {% if prof == selected_profession %}selected{% endif %}>{{ prof }}</option>
        {% endfor %}
    </select>
    <select name="source">
        <option value="">Source</option>
        {% for src in sources %}
            <option value="{{ src }}" {% if src == selected_source %}selected{% endif %}>{{ src }}</option>
        {% endfor %}
    </select>
    <select name="scope">
        <option value="">Scope</option>
        {% for sc in scopes %}
            <option value="{{ sc }}" {% if sc == selected_scope %}selected{% endif %}>{{ sc }}</option>
        {% endfor %}
    </select>
    <select name="status">
        <option value="">Status</option>
        {% for stat in statuses %}
            <option value="{{ stat }}" {% if stat == selected_status %}selected{% endif %}>{{ stat }}</option>
        {% endfor %}
    </select>
    <button type="submit">Filter</button>
</form>

<table class="contact-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Profession</th>
            <th>Date of Birth</th>
            <th>Year Connected</th>
            <th>Source</th>
            <th>Working Place</th>
            <th>Native Place</th>
            <th>Mobile Number</th>
            <th>WhatsApp Number</th>
            <th>Email</th>
            <th>Scope</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for contact in contacts %}
        <tr>
            <td>{{ contact.name }}</td>
            <td>{{ contact.category }}</td>
            <td>{{ contact.profession }}</td>
            <td>{{ contact.dob }}</td>
            <td>{{ contact.connected_year }}</td>
            <td>{{ contact.connected_source }}</td>
            <td>{{ contact.working_place }}</td>
            <td>{{ contact.native_place }}</td>
            <td>{{ contact.mobile_number }}</td>
            <td>{{ contact.whatsapp_number }}</td>
            <td>{{ contact.email }}</td>
            <td>{{ contact.scope }}</td>
            <td>{{ contact.status }}</td>
            <td>
                <a href="{% url 'contacts:edit_contact' contact.pk %}">Edit</a> |
                <a href="{% url 'contacts:delete_contact' contact.pk %}">Delete</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="13">No contacts found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>


<!-- Back Button -->
<a href="{% url 'contacts:landing_page' %}" class="back-button">Back</a>

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: black;
        margin: 0;
        padding: 20px;
        
    }

    h2 {
        text-align: center;
        color: white;
        margin-bottom: 20px;
    }

    .back-button {
        display: inline-block;
        margin-bottom: 20px;
        padding: 10px 15px;
        background-color: #333;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .back-button:hover {
        background-color: black;
    }

    .search-form {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    .search-form input, 
    .search-form select, 
    .search-form button {
        padding: 8px;
        border: 1px solid #333;
        border-radius: 4px;
        font-size: 14px;
    }

    button {
        padding: 10px 20px;
        background-color: #333;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    button:hover {
        background-color: black;
    }

    .contact-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background-color: white;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
        font-size:16px;
    }

    th {
        background-color: #f2f2f2;
        color: #333;
        font-size:16px;
    }

    td {
        color: #555;
        font-size:16px;
    }

    tr:nth-child(even) {
        background-color: #f9f9f9;
        font-size:16px;
    }

    .add-contact-button {
        display: inline-block;
        margin: 20px 0;
        padding: 10px 15px;
        background-color: #333;
        color: white;
        text-decoration: none;
        border-radius: 5px;
    }

    .add-contact-button:hover {
        background-color: black;
    }

    /* Media Queries */
    @media (max-width: 768px) {
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            margin: 0;
            padding: 20px;
           
            
        }
        .contact-table {
            font-size: 10px; /* Adjusted for readability */
            flex-wrap: nowrap;  /* Prevent wrapping */
            justify-content: flex-start;
        }

        .contact-table th, .contact-table td {
            padding: 10px; /* Increased padding for easier touch access */
        }

        .add-contact-button {
            padding: 10px 15px; /* Adjusted padding */
            font-size: 16px; /* Larger font for better readability */
        }

        h2 {
            font-size: 5px; /* Increased heading size */
        }
    }

    @media (max-width: 480px) {
        body {
            font-family: Arial, sans-serif;
            background-color: black;
            margin: 0;
            padding: 20px;
            
            
        }
        .contact-table {
            font-size: 10px; /* Adjusted for readability */
            flex-wrap: nowrap;  /* Prevent wrapping */
            justify-content: flex-start;
        }

        .add-contact-button {
            width: 100%;
            text-align: center;
        }
    }
</style>
{% endblock %}
